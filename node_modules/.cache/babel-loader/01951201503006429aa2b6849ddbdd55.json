{"remainingRequest":"/Users/apple/work/study/city33/cityPro3/node_modules/babel-loader/lib/index.js!/Users/apple/work/study/city33/cityPro3/node_modules/eslint-loader/index.js??ref--13-0!/Users/apple/work/study/city33/cityPro3/src/utils/tools.js","dependencies":[{"path":"/Users/apple/work/study/city33/cityPro3/src/utils/tools.js","mtime":1585306359745},{"path":"/Users/apple/work/study/city33/cityPro3/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/work/study/city33/cityPro3/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/apple/work/study/city33/cityPro3/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"/Users/apple/work/study/city33/cityPro3/node_modules/@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.post = post;\nexports.syntaxHighlightJson = syntaxHighlightJson;\nexports.formatTime = exports.formatRes = exports.sliceAfter = exports.sliceBefore = exports.throttle = exports.debounce = exports.dateFormat = exports.message = exports.setHeight = exports.setWidth = exports.formatParam = exports.toScrollEnd = exports.toScrollStart = exports.setIntervalCustom = exports.setTimeoutCustom = exports.goLogin = exports.decodeToken = exports.isRefreshTokenExpired = exports.isTokenExpired = exports.directLogin = void 0;\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/es6.array.sort\");\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nvar _axios = _interopRequireDefault(require(\"axios\"));\n\nvar _store = _interopRequireDefault(require(\"@/store\"));\n\nvar _router = _interopRequireDefault(require(\"@/router\"));\n\nvar _jwtDecode = _interopRequireDefault(require(\"jwt-decode\"));\n\nvar _elementUi = require(\"element-ui\");\n\nvar _dayjs = _interopRequireDefault(require(\"dayjs\"));\n\nvar _this3 = void 0,\n    _arguments = arguments;\n\n/**\n * 退出登录\n */\nvar directLogin = function directLogin() {\n  _store.default.commit('user/REMOVE_TOKEN');\n\n  _router.default.push({\n    path: '/login',\n    query: {\n      redirectUrl: window.location.href.split('#')[1] || ''\n    }\n  });\n};\n/**\n * 快过期了 和 已经过期了\n * @returns {boolean}\n */\n\n\nexports.directLogin = directLogin;\n\nvar isTokenExpired = function isTokenExpired(v) {\n  var expiredTime = (0, _jwtDecode.default)(v).exp;\n\n  if (expiredTime) {\n    var nowTime = new Date().getTime();\n    var willExpired = expiredTime * 1000 - nowTime < 2000;\n    return willExpired;\n  }\n\n  return false;\n};\n/**\n * 快过期了 和 已经过期了 refreshToken\n * @returns {boolean}\n */\n\n\nexports.isTokenExpired = isTokenExpired;\n\nvar isRefreshTokenExpired = function isRefreshTokenExpired() {\n  var expiredTime = _store.default.getters.deRefreshTokenObj.exp;\n\n  if (expiredTime) {\n    var nowTime = new Date().getTime();\n    var willExpired = expiredTime * 1000 - nowTime < 2000;\n    return willExpired;\n  }\n\n  return false;\n};\n/**\n * 解析token\n */\n\n\nexports.isRefreshTokenExpired = isRefreshTokenExpired;\n\nvar decodeToken = function decodeToken() {\n  return (0, _jwtDecode.default)(_store.default.getters.token);\n};\n\nexports.decodeToken = decodeToken;\n\nvar goLogin = function goLogin() {\n  var url = window.location.origin + '/login.html';\n  var redirect = window.location.pathname;\n  window.localStorage.clear();\n  window.localStorage.setItem('redirect', redirect);\n  window.location.href = url;\n};\n\nexports.goLogin = goLogin;\n\nvar setTimeoutCustom = function setTimeoutCustom(fun, time, that) {\n  var timer = setTimeout(function () {\n    fun();\n  }, time);\n  that.$once('hook:beforeDestroy', function () {\n    clearTimeout(timer);\n  });\n};\n\nexports.setTimeoutCustom = setTimeoutCustom;\n\nvar setIntervalCustom = function setIntervalCustom(fun, time, that) {\n  var timer = setInterval(function () {\n    fun();\n  }, time);\n  that.$once('hook:beforeDestroy', function () {\n    if (process.env.NODE_ENV === 'development') {\n      console.log('destroyTimer', timer);\n    }\n\n    clearTimeout(timer);\n  });\n};\n\nexports.setIntervalCustom = setIntervalCustom;\n\nvar toScrollStart = function toScrollStart(eleId) {\n  var eleWraper = document.getElementById(eleId);\n  eleWraper.scrollTop = 0;\n};\n\nexports.toScrollStart = toScrollStart;\n\nvar toScrollEnd = function toScrollEnd(eleId) {\n  var eleWraper = document.getElementById(eleId);\n\n  if (eleWraper) {\n    var scrollHeight = eleWraper.scrollHeight;\n    eleWraper.scrollTop = scrollHeight;\n  }\n};\n\nexports.toScrollEnd = toScrollEnd;\n\nvar formatParam = function formatParam(paramObj) {\n  var paramsStr = '';\n\n  for (var i in paramObj) {\n    if (paramObj[i]) {\n      paramsStr += \"\".concat(i, \"=\").concat(paramObj[i], \"&\");\n    }\n  }\n\n  paramsStr = paramsStr.slice(0, paramsStr.length - 1);\n  return paramsStr;\n};\n\nexports.formatParam = formatParam;\n\nvar setWidth = function setWidth(eleId, that, num) {\n  var eleWidth = document.getElementById(eleId).clientWidth - num;\n  that.w = eleWidth + 'px';\n};\n\nexports.setWidth = setWidth;\n\nvar setHeight = function setHeight(num, that) {\n  that.h = document.getElementsByTagName('body')[0].clientHeight - num + 'px';\n}; // 去重\n\n\nexports.setHeight = setHeight;\n\nArray.prototype.unique = function () {\n  this.sort();\n  var re = [this[0]];\n\n  for (var i = 1; i < this.length; i++) {\n    if (this[i] !== re[re.length - 1]) {\n      re.push(this[i]);\n    }\n  }\n\n  return re;\n};\n/**\n *\n * @param {*} url\n * @param {*} data\n */\n\n\nvar message = function message(type, _message) {\n  return (0, _elementUi.Message)({\n    message: _message,\n    type: type,\n    duration: 5 * 1000\n  });\n};\n/**\n * post 请求封装\n */\n\n\nexports.message = message;\n\nfunction post(url) {\n  var _this = this;\n\n  var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return new Promise(function (resolve, reject) {\n    _axios.default.post(url, data).then(function (response) {\n      if (response.status === 200) {\n        resolve(response.data);\n      } else {\n        _this.$message.error(response.statusText);\n      }\n    }, function (err) {\n      reject(err);\n    });\n  });\n}\n\nvar dateFormat = function dateFormat(time) {\n  var form = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'YYYY-MM-DD HH:mm:ss';\n  return (0, _dayjs.default)(time).format(form);\n};\n\nexports.dateFormat = dateFormat;\n\nfunction syntaxHighlightJson(json) {\n  if (typeof json !== 'string') {\n    json = JSON.stringify(json, undefined, 4);\n  }\n\n  json = json.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n  return json.replace(/(\"(\\\\u[a-zA-Z0-9]{4}|\\\\[^u]|[^\\\\\"])*\"(\\s*:)?|\\b(true|false|null)\\b|-?\\d+(?:\\.\\d*)?(?:[eE][+]?\\d+)?)/g, function (match) {\n    var cls = 'number';\n\n    if (/^\"/.test(match)) {\n      if (/:$/.test(match)) {\n        cls = 'key';\n        match = match.substring(1, match.length - 2) + ':';\n      } else {\n        cls = 'string';\n      }\n    } else if (/true|false/.test(match)) {\n      cls = 'boolean';\n    } else if (/null/.test(match)) {\n      cls = 'null';\n    }\n\n    return '<span class=\"' + cls + '\">' + match + '</span>';\n  });\n}\n\nvar debounce = function debounce(func, wait) {\n  // 缓存一个定时器id\n  var timer = 0; // 这里返回的函数是每次用户实际调用的防抖函数\n  // 如果已经设定过定时器了就清空上一次的定时器\n  // 开始一个新的定时器，延迟执行用户传入的方法\n\n  return function () {\n    var _this2 = this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    if (timer) clearTimeout(timer);\n    timer = setTimeout(function () {\n      func.apply(_this2, args);\n    }, wait);\n  };\n};\n\nexports.debounce = debounce;\n\nvar throttle = function throttle(func, wait) {\n  var lastTime = null;\n  var timeout;\n  return function () {\n    var context = _this3;\n    var now = new Date(); // eslint-disable-next-line no-undef\n\n    var arg = _arguments;\n\n    if (now - lastTime - wait > 0) {\n      if (timeout) {\n        clearTimeout(timeout);\n        timeout = null;\n      }\n\n      func.apply(context, arg);\n      lastTime = now;\n    } else if (!timeout) {\n      timeout = setTimeout(function () {\n        func.apply(context, arg);\n      }, wait);\n    }\n  };\n};\n\nexports.throttle = throttle;\n\nvar sliceBefore = function sliceBefore(str, flag) {\n  if (!str) return '';\n  return str.slice(0, str.lastIndexOf(flag)).trim() || '';\n};\n\nexports.sliceBefore = sliceBefore;\n\nvar sliceAfter = function sliceAfter(str, flag) {\n  if (!str) return '';\n  return str.slice(str.lastIndexOf(flag) + 1).trim() || '';\n};\n\nexports.sliceAfter = sliceAfter;\n\nvar formatRes = function formatRes(obj) {\n  var tableData = [];\n\n  for (var i in obj) {\n    obj[i][0].value.name = i;\n    tableData.push(obj[i][0].value);\n  }\n\n  return tableData;\n};\n\nexports.formatRes = formatRes;\n\nvar formatTime = function formatTime(startTime, endTime) {\n  var lefttime = endTime - startTime; // 距离结束时间的毫秒数\n\n  var leftd = Math.floor(lefttime / (1000 * 60 * 60 * 24)); // 计算天数\n\n  var lefth = Math.floor(lefttime / (1000 * 60 * 60) % 24); // 计算小时数\n\n  var leftm = Math.floor(lefttime / (1000 * 60) % 60); // 计算分钟数\n\n  var lefts = Math.floor(lefttime / 1000 % 60); // 计算秒数\n\n  var day = leftd ? leftd + '天' : '';\n  var hour = lefth ? lefth + '小时' : '';\n  var mini = leftm ? leftm + '分' : '';\n  var second = lefts ? lefts + '秒' : '';\n  return day + hour + mini + second; // 返回倒计时的字符串\n}; // export const compare = (o1, o2) => {\n//   if (typeof o1 !== typeof o2) {\n//     return false;\n//   }\n//   if (typeof o1.length !== typeof o2.length) {\n//     return false;\n//   }\n//   var bool = true;\n//   var keyArr1 = [];\n//   var keyArr2 = [];\n//   for (var i in o1) {\n//     keyArr1.push(i);\n//   }\n//   for (var i in o2) {\n//     keyArr2.push(i);\n//   }\n//   if (keyArr1.length != keyArr2.length) {\n//     return false;\n//   }\n//   for (var i = 0, k = keyArr2.length; i < k; i++) {\n//     keyArr1.push(keyArr2[i]);\n//   }\n//   var keyArr = keyArr1.unique();\n//   for (var i = 0, k = keyArr.length; i < k; i++) {\n//     if (keyArr[i] in o1 && keyArr[i] in o2) {\n//       if (\n//         typeof o1[keyArr[i]] === 'object' &&\n//         typeof o2[keyArr[i]] === 'object'\n//       ) {\n//         bool = compare(o1[keyArr[i]], o2[keyArr[i]]);\n//       } else if (o1[keyArr[i]] !== o2[keyArr[i]]) {\n//         return false;\n//       }\n//     } else {\n//       return false;\n//     }\n//   }\n//   return bool;\n// };\n\n\nexports.formatTime = formatTime;",null]}