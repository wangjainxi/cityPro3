{"remainingRequest":"/Users/apple/work/study/city33/cityPro3/node_modules/babel-loader/lib/index.js!/Users/apple/work/study/city33/cityPro3/node_modules/eslint-loader/index.js??ref--13-0!/Users/apple/work/study/city33/cityPro3/src/permission.js","dependencies":[{"path":"/Users/apple/work/study/city33/cityPro3/src/permission.js","mtime":1585369677947},{"path":"/Users/apple/work/study/city33/cityPro3/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/work/study/city33/cityPro3/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/apple/work/study/city33/cityPro3/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"/Users/apple/work/study/city33/cityPro3/node_modules/@babel/runtime/helpers/interopRequireDefault\");\n\nrequire(\"regenerator-runtime/runtime\");\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"/Users/apple/work/study/city33/cityPro3/node_modules/@babel/runtime-corejs2/helpers/asyncToGenerator\"));\n\nvar _router = _interopRequireDefault(require(\"./router\"));\n\nvar _nprogress = _interopRequireDefault(require(\"nprogress\"));\n\nrequire(\"nprogress/nprogress.css\");\n\nvar _getPageTitle = _interopRequireDefault(require(\"@/utils/get-page-title\"));\n\nvar _store = _interopRequireDefault(require(\"@/store\"));\n\nvar _vue = _interopRequireDefault(require(\"vue\"));\n\n// progress bar\n// progress bar style\n_nprogress.default.configure({\n  showSpinner: false\n}); // NProgress Configuration\n\n\nvar whiteList = ['/login']; // no redirect whitelist\n\n_router.default.beforeEach(\n/*#__PURE__*/\nfunction () {\n  var _ref = (0, _asyncToGenerator2.default)(\n  /*#__PURE__*/\n  regeneratorRuntime.mark(function _callee(to, from, next) {\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (_store.default.getters.isShowEdit) {\n              next(false);\n              setTimeout(function () {\n                new _vue.default().$confirm('修改还未保存,确认离开吗', '提示', {\n                  confirmButtonText: '确定',\n                  cancelButtonText: '取消',\n                  type: 'warning'\n                }).then(function () {\n                  next();\n\n                  _store.default.commit('net/CHANGE_EDIT', false);\n                }).catch(function () {\n                  next(false);\n                });\n              }, 0);\n            } else {\n              // start progress bar\n              _nprogress.default.start();\n\n              next(); // set page title\n\n              document.title = (0, _getPageTitle.default)(to.meta.title); // determine whether the user has logged in\n              // const hasToken = localStorage.getItem('refreshToken');\n              // if (hasToken) {\n              //   if (to.path === '/login') {\n              //   // if is logged in, redirect to the home page\n              //     next({ path: '/dashboard' });\n              //   }\n              // } else {\n              //   /* has no token*/\n              //   if (whiteList.indexOf(to.path) !== -1) {\n              //     // in the free login whitelist, go directly\n              //     next();\n              //   } else {\n              //   // other pages that do not have permission to access are redirected to the login page.\n              //     next(`/login?redirect=${to.path}`);\n              //   }\n              //   NProgress.done();\n              // }\n            }\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}());\n\n_router.default.afterEach(function () {\n  // finish progress bar\n  _nprogress.default.done();\n});",null]}