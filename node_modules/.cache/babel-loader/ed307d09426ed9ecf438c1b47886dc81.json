{"remainingRequest":"/Users/apple/work/study/city33/cityPro3/node_modules/babel-loader/lib/index.js!/Users/apple/work/study/city33/cityPro3/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/apple/work/study/city33/cityPro3/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/work/study/city33/cityPro3/src/views/CaseType/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/work/study/city33/cityPro3/src/views/CaseType/index.vue","mtime":1585368381009},{"path":"/Users/apple/work/study/city33/cityPro3/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/work/study/city33/cityPro3/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/apple/work/study/city33/cityPro3/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/work/study/city33/cityPro3/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"/Users/apple/work/study/city33/cityPro3/node_modules/@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _typeof2 = _interopRequireDefault(require(\"/Users/apple/work/study/city33/cityPro3/node_modules/@babel/runtime-corejs2/helpers/typeof\"));\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nvar _vueContext = _interopRequireDefault(require(\"vue-context\"));\n\nrequire(\"vue-context/src/sass/vue-context.scss\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  components: {\n    VueContext: _vueContext.default\n  },\n  data: function data() {\n    return {\n      dialogFormVisible: false,\n      activeName: 'first',\n      caseType: [{\n        id: 1,\n        label: '事件',\n        children: [{\n          id: 40,\n          label: '市容环境',\n          children: [{\n            id: 15,\n            label: '市容环境1-1'\n          }, {\n            id: 16,\n            label: '市容环境1-2'\n          }, {\n            id: 17,\n            label: '市容环境1-3'\n          }]\n        }, {\n          id: 3,\n          label: '宣传广告',\n          children: [{\n            id: 18,\n            label: '宣传广告1-1'\n          }, {\n            id: 19,\n            label: '宣传广告1-2'\n          }, {\n            id: 20,\n            label: '宣传广告1-3'\n          }]\n        }, {\n          id: 4,\n          label: '施工管理',\n          children: [{\n            id: 21,\n            label: '施工管理1-1'\n          }, {\n            id: 22,\n            label: '施工管理1-2'\n          }, {\n            id: 23,\n            label: '施工管理1-3'\n          }]\n        }, {\n          id: 5,\n          label: '突发事件',\n          children: [{\n            id: 24,\n            label: '突发事件-1'\n          }, {\n            id: 25,\n            label: '突发事件-2'\n          }, {\n            id: 26,\n            label: '突发事件-3'\n          }]\n        }, {\n          id: 6,\n          label: '街面秩序',\n          children: [{\n            id: 14,\n            label: '扩展事件'\n          }]\n        }, {\n          id: 7,\n          label: '热线问题',\n          children: [{\n            id: 33,\n            label: '热线问题-1'\n          }, {\n            id: 34,\n            label: '热线问题-2'\n          }, {\n            id: 35,\n            label: '热线问题-3'\n          }]\n        }, {\n          id: 8,\n          label: '违法建设类',\n          children: [{\n            id: 36,\n            label: '违法建设'\n          }]\n        }]\n      }, {\n        id: 2,\n        label: '部件',\n        children: [{\n          id: 9,\n          label: '公共设施',\n          children: [{\n            id: 27,\n            label: '公共设施-1'\n          }, {\n            id: 28,\n            label: '公共设施-2'\n          }, {\n            id: 29,\n            label: '公共设施-3'\n          }]\n        }, {\n          id: 10,\n          label: '道路交通',\n          children: [{\n            id: 30,\n            label: '道路交通-1'\n          }, {\n            id: 31,\n            label: '道路交通-2'\n          }, {\n            id: 32,\n            label: '道路交通-3'\n          }]\n        }, {\n          id: 11,\n          label: '市容环境',\n          children: []\n        }, {\n          id: 12,\n          label: '园林绿化',\n          children: []\n        }, {\n          id: 13,\n          label: '房屋土地',\n          children: []\n        }]\n      }],\n      selectDate: {},\n      // 弹框标题\n      dialogStatus: '',\n      textMap: {\n        update: '修改案件类型',\n        create: '新增案件类型',\n        remove: '删除案件类型'\n      },\n      // 表单数据\n      temp: {\n        code: 0,\n        name: ''\n      },\n      rules: {\n        code: [{\n          required: true,\n          message: '请输入案例编码',\n          trigger: 'blur'\n        }],\n        name: [{\n          required: true,\n          message: '请填写案例名称',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    add: function add(data) {\n      // console.log('selectDate.id', data)\n      this.dialogFormVisible = true;\n      this.dialogStatus = 'create';\n      this.selectDate = data;\n    },\n    remove: function remove(data) {\n      this.selectDate = data;\n      this.dialogStatus = 'remove';\n      var fatherindex = 0;\n      var rank = 0;\n      this.select(this.caseType, fatherindex, rank);\n    },\n    update: function update(data) {\n      this.dialogFormVisible = true;\n      this.dialogStatus = 'update';\n      this.selectDate = data;\n      this.temp = {\n        code: data.id,\n        name: data.name\n      };\n    },\n    cancel: function cancel() {\n      this.dialogFormVisible = false;\n      this.temp = {\n        code: '',\n        name: ''\n      };\n    },\n    Onsubmit: function Onsubmit() {\n      // alert(1)\n      // console.log(this.selectDate.children)\n      var newDate = {\n        id: this.temp.code,\n        label: this.temp.name,\n        children: []\n      };\n      var rank = 0;\n      var fatherindex = 0;\n\n      if (this.dialogStatus === 'create') {\n        // console.log(this.selectDate.id)\n        // console.log(this.selectDate.children)\n        if (this.selectDate.children.length > 1) {\n          this.selectDate.children.push(newDate);\n        } else {\n          alert(1); // 没有children代表最底层\n          // console.log(this.caseType[this.zindex])\n\n          this.select(this.caseType, fatherindex, rank); // alert(1)\n\n          console.log(rank);\n        }\n      } else {\n        this.select(this.caseType, fatherindex, rank); // this.selectDate = newDate\n      }\n    },\n    select: function select(data, fatherindex, rank) {\n      var _this = this;\n\n      console.log(rank);\n      rank++;\n      data.forEach(function (item, index) {\n        if (item.id === _this.selectDate.id) {\n          console.log('this.selectDate.id', item.id);\n          console.log(data, index, fatherindex, rank);\n          alert(1);\n          _this.fatherNode = data;\n          _this.fatherNodeIndex = fatherindex;\n          _this.NodeIndex = index;\n          console.log('rank', rank); // 删除\n\n          if (_this.dialogStatus === 'remove') {\n            if (rank === 1) {\n              _this.$confirm('此操作将删除该类所有案件, 是否继续?', '提示', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning'\n              }).then(function () {\n                _this.caseType.splice(index, 1);\n\n                _this.$message({\n                  type: 'success',\n                  message: '删除成功!'\n                });\n              }).catch(function () {\n                _this.$message({\n                  type: 'info',\n                  message: '已取消删除'\n                });\n              });\n            } else if (rank === 2) {\n              _this.$confirm('此操作将删除该类所有案件, 是否继续?', '提示', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning'\n              }).then(function () {\n                console.log('二层级', _this.caseType[fatherindex]);\n\n                _this.caseType[fatherindex].children.splice(index, 1);\n\n                _this.$message({\n                  type: 'success',\n                  message: '删除成功!'\n                });\n              }).catch(function () {\n                _this.$message({\n                  type: 'info',\n                  message: '已取消删除'\n                });\n              });\n            } else if (rank === 3) {\n              _this.$confirm('此操作将删除该类所有案件, 是否继续?', '提示', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning'\n              }).then(function () {\n                _this.caseType.forEach(function (item, i) {\n                  console.log(item, i);\n                  item.children.forEach(function (item) {\n                    if (item.children === data) {\n                      _this.zindex = i;\n                      console.log('这是最上层index', i);\n\n                      _this.caseType[i].children[fatherindex].children.splice(index, 1);\n                    }\n                  });\n                });\n\n                _this.$message({\n                  type: 'success',\n                  message: '删除成功!'\n                });\n              }).catch(function () {\n                _this.$message({\n                  type: 'info',\n                  message: '已取消删除'\n                });\n              });\n            }\n          } else {\n            // 增改\n            if (rank === 1) {\n              _this.$set(_this.caseType, _this.NodeIndex, {\n                id: _this.temp.code,\n                label: _this.temp.name,\n                children: _this.selectDate.children\n              });\n            } else if (rank === 2) {\n              console.log((0, _typeof2.default)(fatherindex)); // console.log(this.caseType[])\n\n              _this.$set(_this.caseType[fatherindex].children, index, {\n                id: _this.temp.code,\n                label: _this.temp.name,\n                children: _this.selectDate.children\n              });\n            } else if (rank === 3) {\n              // this.caseType[fatherindex].children[index]\n              console.log('这是data', data);\n\n              _this.caseType.forEach(function (item, i) {\n                console.log(item, i);\n                item.children.forEach(function (item) {\n                  if (item.children === data) {\n                    _this.zindex = i;\n                    console.log('这是最上层index', i);\n\n                    if (_this.dialogStatus === 'update') {\n                      _this.$set(_this.caseType[i].children[fatherindex].children, index, {\n                        id: _this.temp.code,\n                        label: _this.temp.name,\n                        children: _this.selectDate.children\n                      });\n\n                      return i;\n                    } else {\n                      alert(1);\n\n                      _this.caseType[i].children[fatherindex].children.push({\n                        id: _this.temp.code,\n                        label: _this.temp.name,\n                        children: _this.selectDate.children\n                      });\n                    }\n                  }\n                });\n              }); // this.$set(this.caseType[zindex])\n\n            }\n\n            _this.dialogFormVisible = false;\n            _this.temp = {\n              code: '',\n              name: ''\n            };\n          }\n        } else {\n          // console.log(item)\n          if (item.children && item.children.length > 0) {\n            _this.select(item.children, index, rank);\n          }\n        }\n      });\n    }\n  }\n};\nexports.default = _default;",null]}