{"remainingRequest":"/Users/apple/work/study/city33/cityPro3/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/work/study/city33/cityPro3/src/views/usermanagement/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/work/study/city33/cityPro3/src/views/usermanagement/index.vue","mtime":1585368381036},{"path":"/Users/apple/work/study/city33/cityPro3/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/work/study/city33/cityPro3/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/apple/work/study/city33/cityPro3/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/work/study/city33/cityPro3/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  name: 'UserManagement',\n  data() {\n    return {\n      // 新增、修改弹层\n      dialogFormVisible: false,\n      // 所属机构\n      dialogHigthLevelSelect: false,\n      // // 弹框标题\n      dialogStatus: '',\n      textMap: {\n        update: '修改用户',\n        create: '新增用户'\n      },\n      searchForm: {\n        username: '',\n        name: '',\n        role: ''\n      },\n      tableData: [\n        {\n          checkbox: true,\n          username: 'aaa',\n          name: '值班长',\n          role: '',\n          PDA: 2412424,\n          status: true\n        },\n        {\n          checkbox: false,\n          username: 'aaa',\n          name: '刘美丽',\n          role: '',\n          PDA: 121212,\n          status: false\n        },\n        {\n          checkbox: false,\n          username: 'aaa',\n          name: '专业部门',\n          role: '',\n          PDA: 2121244,\n          status: false\n        },\n        {\n          checkbox: false,\n          username: 'ccc',\n          name: '监督员',\n          role: '',\n          PDA: 32234234,\n          status: false\n        },\n        {\n          checkbox: false,\n          username: 'aaa',\n          name: '专业部门',\n          role: '',\n          PDA: 3242342,\n          status: false\n        },\n        {\n          checkbox: false,\n          username: 'aaa',\n          name: '值班长',\n          role: '',\n          PDA: 3424,\n          status: false\n        },\n        {\n          checkbox: false,\n          username: 'asdsada',\n          name: '值班长',\n          role: '',\n          PDA: 453,\n          status: false\n        },\n        {\n          checkbox: false,\n          username: 'sdas',\n          name: '环卫刘丽',\n          role: '',\n          PDA: 3434,\n          status: false\n        },\n        {\n          checkbox: false,\n          username: 'aaa',\n          name: '城管局',\n          role: '',\n          PDA: 23242,\n          status: false\n        },\n        {\n          checkbox: false,\n          username: 'aaa',\n          name: '城管局',\n          role: '',\n          PDA: 3242,\n          status: false\n        }\n      ],\n      // 新增表单数据\n      temp: {\n        username: null,\n        name: null,\n        password: null,\n        useroll: [],\n        PDA: null,\n        sex: 1,\n        higthlevel: '',\n        email: 'xxx@xx.com',\n        userid: '',\n        tel: 13911111111,\n        imageUrl: '',\n        phone: '',\n        address: '',\n        postcod: '',\n        remark: '',\n        filter: ''\n      },\n      // 组织机构数据\n      OrganizationalChart: [\n        {\n          name: '组织机构',\n          index: '1',\n          children: [\n            { name: '忻州经济技术建设环境保护...', children: '', index: '1-1' },\n            { name: '忻州经济技术环卫队...', children: '', index: '1-2' },\n            {\n              index: '1-3',\n              name: '忻州经济技术综合监察大队、开发区...',\n              children: [\n                { name: '孩子1', index: '1-3-1' },\n                { name: '孩子2', index: '1-3-2' }\n              ]\n            },\n            { name: '市建设局总办', children: '', index: '1-4' },\n            { name: '建管科', children: '', index: '1-5' },\n            {\n              name: '安全站',\n              index: '1-6',\n              children: [\n                { name: '孩子1', index: '1-6-1' },\n                { name: '孩子2', index: '1-6-2' }\n              ]\n            },\n            { name: '招标局', children: '', index: '1-7' },\n            { name: '工程质量监督站...', children: '', index: '1-8' },\n            { name: '市城建监察支队', children: '', index: '1-9' },\n            { name: '市人民公园', children: '', index: '1-10' }\n          ]\n        }\n      ],\n      // 属性\n      defaultProps: {\n        children: 'children',\n        label: 'name'\n      },\n      // 选中的上级单位index\n      activeIndex: 1,\n      fileList: []\n    }\n  },\n  methods: {\n    searchInt() {\n      const { username, name } = this.searchForm\n      const searchtable = this.tableData.filter(item => {\n        if (item.username === username || item.name === name) {\n          return item\n        }\n      })\n      this.tableData = searchtable\n    },\n    // 新增用户\n    addUser() {\n      this.dialogStatus = 'create'\n      this.dialogFormVisible = true\n      // alert('用户新增')\n    },\n    // 修改用户\n    updateUser() {\n      this.dialogStatus = 'update'\n      this.dialogFormVisible = true\n    },\n    // 点击选择上级单位\n    selectHigthLevel() {\n      this.dialogHigthLevelSelect = true\n    },\n    // 上传图片\n    // handleAvatarSuccess(res, file) {\n    //   this.temp.imageUrl = URL.createObjectURL(file.raw)\n    //   // console.log(this.temp.imageUrl)\n    // },\n    beforeAvatarUpload(file) {\n      console.log(file)\n\n      const isJPG = file.type === 'image/jpeg' || 'image/png'\n      const isLt2M = file.size / 1024 / 1024 < 2\n\n      if (!isJPG) {\n        this.$message.error('上传头像图片只能是 JPG/jpeg 格式!')\n      }\n      if (!isLt2M) {\n        this.$message.error('上传头像图片大小不能超过 2MB!')\n      }\n      return isJPG && isLt2M\n    },\n    // 取消修改或新增\n    cancelInstitution() {\n      this.dialogFormVisible = false\n      this.temp = {\n        username: null,\n        name: null,\n        password: null,\n        useroll: [],\n        PAD: null,\n        sex: 1,\n        higthlevel: '',\n        email: 'xxx@xx.com',\n        userid: '',\n        tel: 13911111111,\n        imageUrl: '',\n        phone: '',\n        address: '',\n        postcod: '',\n        remark: '',\n        filter: ''\n      }\n    },\n    // 点击修改或新增的确定\n    addInstitution() {\n      if (this.dialogStatus === 'create') {\n        // 新增\n        const { username, name, role, PDA } = this.temp\n        console.log(PDA)\n\n        const newData = {\n          checkbox: true,\n          username,\n          name,\n          role,\n          PDA,\n          status: true\n        }\n        this.tableData.unshift(newData)\n      }\n      this.dialogFormVisible = false\n    },\n    handleNodeClick(data) {\n      // console.log(data)\n\n      this.temp.higthlevel = data.name\n    },\n    handleChange(file, fileList) {\n      // console.log(file)\n      if (file) {\n        if (this.beforeAvatarUpload(file)) {\n          this.fileList = fileList.slice(-1)\n          this.temp.imageUrl = URL.createObjectURL(file.raw)\n        }\n      }\n    }\n  }\n}\n",null]}